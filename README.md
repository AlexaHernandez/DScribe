# DScribe
DScribe is a technique to generate both unit tests and documentation from a set of templates and invocations.

## License and Attribution

The content of this repository is licensed unter the terms of the [Apache license, Version 2.0](LICENSE). To indicate attribution, please link to this repository and cite the following technical report:

```
Mathieu Nassif, Alexa Hernandez, Ashvitha Sridharan, and Martin P. Robillard.
Generating Unit Tests for Documentation.
ArXiv preprint XXX, 12 pages.
18 May 2020.
```

## Installing DScribe

**Using Eclipse:** You can import this repository as an Eclipse project, and run it with a recent Java version (>= 11).

**Compiling sources:** All source files are in the `src/main/java` folder, and dependencies are distributed in the `libs` folder.

## Folder structure

DScribe uses the following folders by default, each located at the root of the project. You can change these paths for your needs in the `cs.mcgill.cs.swevo.dscribe.Context` class.

- `configs`: This folder contains all invocation files. DScribe will automatically parse each file that ends with the `.config.json` extension.
- `templates`: This folder contains all template files. DScribe will automatically parse each `.java` file in this folder, and include all methods tagged with the `@Template` annotation as templates.
- `output`: Tests generated by DScribe are written to this folder.
- `src/main/java`: This folder should contain the source files of the project to document.

## Running DScribe

The entry point of DScribe is the `main` method in `ca.mcgill.cs.swevo.dscribe.DScribe`. Use command line arguments to specify which operation you want to perform, among the following:

- `createConfig`: This operation generates the boilerplate of invocation files (in JSON format). It creates one file per class, and includes all methods of the class, but without actual invocations. This operation is optional, as the invocation files can be written from scratch.

  To use this operation, provide the fully qualified name of the class(es) for which you want to generate invocation files. For example,

  ```
  java -cp libs/*.jar:bin:your/project ca.mcgill.cs.swevo.dscribe.DScribe createConfig com.mypackage.MyClass
  ```

- `generateTests`: This operation generates unit tests based on the invocation files. For example,

  ```
  java -cp libs/*.jar:bin:your/project ca.mcgill.cs.swevo.dscribe.DScribe generateTests
  ```

- `generateDocs`: This operation generates documentation based on the invocation files. For example,

  ```
  java -cp libs/*.jar:bin:your/project ca.mcgill.cs.swevo.dscribe.DScribe generateDocs
  ```

- `parseTests`: This experimental feature parses existing unit tests to generate invocations. For example,

  ```
  java -cp libs/*.jar:bin:your/project ca.mcgill.cs.swevo.dscribe.DScribe parseTests
  ```

## Dependencies

DScribe depends on the following Java libraries:

1. *Picocli* is a one-file library to create CLI applications easily. We redistribute the source code of this library in our source folder.
2. *GSON* is a JSON serialization library. The compiled class files are included in the `libs` folder.
3. *JavaParser* is a library to parse Java source files into ASTs. The compiled class files are included in the `libs` folder.

All dependencies are licensed under the Apache License 2.0 (the same as this tool). A copy of the license is included with this software.
